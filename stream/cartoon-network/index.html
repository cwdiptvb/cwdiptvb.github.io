<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hotplayer IPTV</title>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  <script src="https://cdn.jwplayer.com/libraries/your-library-key.js"></script>
  <style>
    body {
      background-color: #000;
      color: #fff;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    #my-video {
      width: 100%;
      max-width: 800px;
      margin: 2rem auto;
      border: 2px solid #00ffff;
      display: none; /* Hidden until ready */
    }
    #loading-container img {
      max-width: 200px;
      margin-top: 2rem;
    }
    .button {
      background-color: #00ffff;
      color: #000;
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
      margin-top: 1rem;
    }
    .button:hover {
      background-color: #00cccc;
    }
  </style>
</head>
<body>

  <h1>Welcome to Hotplayer IPTV</h1>
  <button class="button" onclick="copyPlaylistURL()">Copy Playlist URL</button>

  <div id="video-wrapper">
    <div id="my-video"></div>
  </div>

  <script>
    function copyPlaylistURL() {
      const url = "https://cwdiptvb.github.io/tv_channels.m3u";
      navigator.clipboard.writeText(url).then(() => {
        alert("Playlist URL copied to clipboard!");
      }).catch(err => {
        alert("Failed to copy URL.");
      });
    }

    $(document).ready(function () {
      // Show loading GIF
      $("#my-video").hide();
      $("body").prepend('<div id="loading-container"><img src="/loading.gif" alt="Loading..."></div>');

      const player = jwplayer("my-video");
      player.setup({
        file: "https://fl1.moveonjoy.com/CARTOON_NETWORK/index.m3u8",
        type: "application/x-mpegURL",
        width: "100%",
        aspectratio: "16:9",
        autostart: true,
        primary: "html5",
        preload: "auto",
        mute: false
      });

      // Unmute explicitly
      player.on("ready", function () {
        player.setMute(false);
      });

      // Hide loading GIF and show video when player starts
      player.on("play", function () {
        $("#loading-container").remove();
        $("#my-video").show();
        $("#player .jw-preview").css("background-image", "none");
        player.setConfig({ image: "" });
      });

      // Toggle border on fullscreen
      player.on("fullscreen", function (e) {
        const isFullscreen = e.fullscreen;
        const videoElement = document.getElementById("my-video");
        videoElement.style.border = isFullscreen ? "none" : "2px solid #00ffff";
      });

      jwplayer_hls_provider.attach();
    });
  </script>

</body>
</html>
